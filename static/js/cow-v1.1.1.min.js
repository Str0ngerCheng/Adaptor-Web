(function(k){"object"===typeof exports&&"undefined"!==typeof module?module.exports=k():"function"===typeof define&&define.amd?define([],k):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).Cow=k()})(function(){return function(){function k(t,p,C){function z(l,q){if(!p[l]){if(!t[l]){var y="function"==typeof require&&require;if(!q&&y)return y(l,!0);if(F)return F(l,!0);q=Error("Cannot find module '"+l+"'");throw q.code="MODULE_NOT_FOUND",q;}q=
p[l]={exports:{}};t[l][0].call(q.exports,function(k){return z(t[l][1][k]||k)},q,q.exports,k,t,p,C)}return p[l].exports}for(var F="function"==typeof require&&require,y=0;y<C.length;y++)z(C[y]);return z}return k}()({1:[function(k,t,p){t.exports=k("./Cow.js").default},{"./Cow.js":2}],2:[function(k,t,p){k=function(){return function(k,t,p,y,l,q,I){function D(a){a=a||32;for(var d="",f=0;f<a;f++)d+="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678".charAt(Math.floor(48*Math.random()));return d}var r=null,
a={msgType:"streamControl",msgId:D(6),clientId:y,msgData:{x:0,y:0,w:1}},u=0,v=0,w=0,x=0,A=0,B=0,f=0,g=0,m=.5,n=.5,E=10,C=null,h=null,d=null,G=null,z=null,c=null,H=null,J=0,K=0,F=0,M=null,L=0;d=k;M=t;E=p;k=C=y;void 0==l?(a={msgType:"streamControl",msgId:D(6),clientId:k,msgData:{x:0,y:0,w:1}},g=f=0,n=m=.5):(a={msgType:"streamControl",msgId:D(6),clientId:k,msgData:{x:l,y:q,w:I}},f=d.width/I,g=d.height/I,m=(a.msgData.x*f+d.width/2)/f,n=(a.msgData.y*g+d.height/2)/g);B=A=x=w=v=u=0;r=new WebSocket(M);r.onopen=
function(k){function l(){g=f=0;a.msgData.x=0;a.msgData.y=0;a.msgData.w=1;n=m=.5}function q(a){if(90==window.orientation||-90==window.orientation)u=a.x,v=a.y;else{var b=window.getComputedStyle(d,null);b=b.getPropertyValue("-webkit-transform")||b.getPropertyValue("-moz-transform")||b.getPropertyValue("-ms-transform")||b.getPropertyValue("-o-transform")||b.getPropertyValue("transform")||"FAIL";"none"!=b?(b.split("(")[1].split(")")[0].split(","),u=a.y,v=a.x):(u=a.x,v=a.y)}}function r(e){if(90==window.orientation||
-90==window.orientation)w=e.x,x=e.y,A=w-u,B=x-v;else{var b=window.getComputedStyle(d,null);b=b.getPropertyValue("-webkit-transform")||b.getPropertyValue("-moz-transform")||b.getPropertyValue("-ms-transform")||b.getPropertyValue("-o-transform")||b.getPropertyValue("transform")||"FAIL";"none"!=b?(b.split("(")[1].split(")")[0].split(","),w=e.y,x=e.x,A=w-u,B=v-x):(w=e.x,x=e.y,A=w-u,B=x-v)}e=f*m;b=g*n;e-=3*A;b-=3*B;b-=d.height/2;a.msgData.x=(e-d.width/2)/f;a.msgData.y=b/g;a.msgData.x=0<=parseFloat(a.msgData.x)?
a.msgData.x:0;a.msgData.x=1>=parseFloat(a.msgData.x)+parseFloat(a.msgData.w)?a.msgData.x:1-a.msgData.w;a.msgData.y=0<=parseFloat(a.msgData.y)?a.msgData.y:0;a.msgData.y=1>=parseFloat(a.msgData.y)+parseFloat(a.msgData.w)?a.msgData.y:1-a.msgData.w;e=a.msgData.x*f+d.width/2;b=a.msgData.y*g+d.height/2;m=e/f;n=b/g;u=w;v=x;e=D(6);a.msgId=e}function t(e){var b=.02;b=1<e.scale?1+b:1-b;e=f*b;b*=g;var c=d.width/e;1/c>E||(1>1/c?(f=d.width,g=d.height,a.msgData.x=0,a.msgData.y=0,a.msgData.w=1,n=m=.5):(f=e,g=b,
a.msgData.w=c,e=g*n-d.height/2,a.msgData.x=(f*m-d.width/2)/f,a.msgData.y=e/g,e=D(6),a.msgId=e))}console.log("Control Websocket open1!");N();var p=navigator.userAgent.toLowerCase();/ipad|iphone|midp|rv:1.2.3.4|ucweb|android|windows ce|windows mobile/.test(p)&&(touch.on(d,"drag",r),touch.on(d,"dragstart",q),touch.on(d,"pinch",t),touch.on(d,"hold",l));d.onmousewheel=function(d){event.preventDefault();var b=.03;0==f&&(f=this.width,g=this.height);b=0<event.wheelDelta?1+b:1-b;d=f*b;b*=g;var c=this.width/
d;1/c>E||(1>1/c?(f=this.width,g=this.height,a.msgData.x=0,a.msgData.y=0,a.msgData.w=1,n=m=.5):(f=d,g=b,a.msgData.w=c,d=g*n-this.height/2,a.msgData.x=(f*m-this.width/2)/f,a.msgData.y=d/g))};d.onmousedown=function(e){h=this.parentNode;/ipad|iphone|midp|rv:1.2.3.4|ucweb|android|windows ce|windows mobile/.test(p)||(h.style.position="relative");e=window.event;"0"==e.button&&(h.lastElementChild.id!=d.id&&(c=null,h.removeChild(h.lastElementChild)),h.onmousedown=function(a){G=a.clientX;z=a.clientY;J=a.offsetX;
K=a.offsetY;c=document.createElement("div");c.className="tempDiv";c.style.Zindex="99999";c.style.border="3px solid green";c.style.position="absolute";c.style.width="0";c.style.height="0";c.style.filter="alpha(opacity:10)";c.style.opacity=.8;h.appendChild(c)});document.oncontextmenu=function(){window.event.returnValue=!1};if("2"==e.button){L++;setTimeout(function(){L=0},300);if(1<L){f=this.width;g=this.height;a.msgData.x=0;a.msgData.y=0;a.msgData.w=1;n=m=.5;return}if(h.lastElementChild.id!=d.id){c=
null;h.onmousedown=null;document.onmouseup=null;h.onmousemove=null;h.removeChild(h.lastElementChild);return}}"0"==e.button&&(h.onmouseup=function(a){null!=c&&c.parentNode.removeChild(c);c=null;h.onmousemove=null;h.onmouseup=null},h.onmousemove=function(b){b.clientX<G?(document.onmousemove=null,document.onmouseup=null):b.clientY<z?(document.onmousemove=null,document.onmouseup=null):(null!=c&&(c.style.left=J+"px",c.style.top=K+"px",c.style.width=Math.abs(G-b.clientX)+"px",F=Math.abs(G-b.clientX),c.style.height=
Math.abs(z-b.clientY)+"px"),document.onmouseup=function(b){h.lastElementChild.id!=d.id?(c=null,h.onmousedown=null,document.onmouseup=null,h.onmousemove=null,h.removeChild(h.lastElementChild)):10>Math.abs(G-b.clientX)?(c=null,h.onmousemove=null,h.onmouseup=null,null!=c&&c.parentNode.removeChild(c)):(h.onmousemove=null,h.onmouseup=null,1==b.which&&(1/a.msgData.w>=E?(a.msgData.x=a.msgData.x,a.msgData.y=a.msgData.y,a.msgData.w=a.msgData.w):(a.msgData.x=J/d.width*a.msgData.w+a.msgData.x,a.msgData.y=K/
d.height*a.msgData.w+a.msgData.y,a.msgData.w*=F/d.width)),null!=c&&c.parentNode.removeChild(c),document.onmousemove=null,document.onmouseup=null)})});3==e.which&&(h.onmousedown=function(a){var b=a.clientY;u=a.clientX;v=b},document.onmousemove=function(b){var c=b.y,e=d;w=b.x;x=c;A=w-u;B=x-v;b=f*m;c=g*n;b-=1*A;c-=1*B;c-=e.height/2;a.msgData.x=(b-e.width/2)/f;a.msgData.y=c/g;a.msgData.x=0<=parseFloat(a.msgData.x)?a.msgData.x:0;a.msgData.x=1>=parseFloat(a.msgData.x)+parseFloat(a.msgData.w)?a.msgData.x:
1-a.msgData.w;a.msgData.y=0<=parseFloat(a.msgData.y)?a.msgData.y:0;a.msgData.y=1>=parseFloat(a.msgData.y)+parseFloat(a.msgData.w)?a.msgData.y:1-a.msgData.w;b=a.msgData.x*f+e.width/2;c=a.msgData.y*g+e.height/2;m=b/f;n=c/g;u=w;v=x},document.onmouseup=function(a){document.onmousemove=null;document.onmouseup=null})}};r.onmessage=function(a){};r.onclose=function(a){console.log("Control Websocket close!");clearInterval(H);d.onmousedown=function(a){}};this.closeControl=function(){clearInterval(H);var c=
{msgType:"clientExit",msgId:a.msgId,clientId:a.clientId};1==r.readyState&&(r.send(JSON.stringify(c)),r.close());r.onclose=function(a){console.log("Control Websocket close!")}};var N=function(){var c=D(6),h=C;H=setInterval(function(){1!=r.readyState?clearInterval(H):(1/a.msgData.w>=E&&(a.msgData.w=1/E),f=d.width/a.msgData.w,g=d.height/a.msgData.w,m=(a.msgData.x*f+d.width/2)/f,n=(a.msgData.y*g+d.height/2)/g,a.msgId=c,a.clientId=h,r.send(JSON.stringify(a)))},5)}}}();p.default=k},{}]},{},[1])(1)});